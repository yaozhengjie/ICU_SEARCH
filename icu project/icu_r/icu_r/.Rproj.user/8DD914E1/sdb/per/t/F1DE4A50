{
    "collab_server" : "",
    "contents" : "xx = function(){\n    #病人编号,subject\n    tt = patient_chartevents[[2]][i]\n    #找到event中的位置\n    location = which(events[[1]] == tt)[1]\n    #itemid编号,和value的数值\n    zz = patient_chartevents[[3]][i]\n    zz_value = patient_chartevents[[4]][i]\n    #赋值给最终的表\n    switch(\n      zz,\n      #温度\n      \"676\"=,\"677\"=,\n      \"223762\" = ifelse(zz_value>38 && zz_value<36 , setevents(2),NA),\n      \n      #心率\n      \"3494\"=,\n      \"211\"=,\n      \"220045\"= ifelse(zz_value>90 ,setevents(3),NA),\n      \n      #呼吸频率\n      \"220210\" =,\n      \"6749\" =,\n      \"618\" =,\n      \"7884\"= ifelse(zz_value>20 ,setevents(4),NA),\n      #二氧化碳分压,毫米汞柱\n      \"4201\" =,\n      \"778\" =,\n      \"3784\" =,\"3835\"=,\"3836\"=,\n      \"227036\"=,\"220235\" = ifelse(zz_value<32,setevents(4),NA),\n      \n      #白细胞数目\n      \"227063\"=,\"227062\"=,\"220546\"=,\"226780\"=,\n      \"4200\"=, \"1542\"=, \"861\"=, \"1127\" = ifelse(zz_value>14 && zz_value<4,setevents(5),NA)\n    )\n}\n\n\n  \nsrc='Rcpp::NumericVector vec(vx);\n   double p = Rcpp::as<double>(dd);\n   double sum = 0.0;\n   for (int i=0; i<vec.size(); i++) {\n   sum += pow(vec[i], p);\n   }\n   return Rcpp::wrap(sum);'\nfun <- cxxfunction(signature(vx=\"numeric\", dd=\"numeric\"), src, plugin=\"Rcpp\")\n\nfun(1:4,2)\n\nsrc='Rcpp::NumericVector vec(vx);\n   double p = Rcpp::as<double>(dd);\n   double sum = 0.0;\n   for (int i=0; i<vec.size(); i++) {\n   sum += pow(vec[i], p);\n   }\n   return Rcpp::wrap(p);'\n\nsrc <- '\n  Rcpp::NumericVector invec(vx);\n  Rcpp::NumericVector outvec = Rcpp::clone(vx);\n  for (int i=0; i<invec.size(); i++) {\n  outvec[i] = log(invec[i]);\n  }\n  return outvec;\n  '\nfun <- cxxfunction(signature(vx=\"numeric\"), src, plugin=\"Rcpp\")  \nx <- seq(1.0, 3.0, by=1)\n\ncbind(x, fun(x))\n\nsrc = 'Rcpp::NumericVector invec(vx);\n\t    Rcpp::NumericVector outvec = log(invec);\n\t\treturn outvec;\n\t\t'\n fun <- cxxfunction(signature(vx=\"numeric\"),src, plugin=\"Rcpp\")\n \n x = seq(1,3)\n fun(x)\n \nsrc <- '\n Rcpp::NumericMatrix mat = Rcpp::clone<Rcpp::NumericMatrix>(mx);\n std::transform(mat.begin(), mat.end(), mat.begin(), ::sqrt);\n return mat;\n '\n fun <- cxxfunction(signature(mx=\"numeric\"), src, plugin=\"Rcpp\")\n orig <- matrix(1:9, 3, 3)\n fun(orig)\n \nfun <- cxxfunction(signature(), plugin=\"Rcpp\",\n body='\n Rcpp::LogicalVector v(6);\n v[0] = v[1] = false;\n v[1] = true;\n v[3] = R_NaN;\n v[4] = R_PosInf;\n v[5] = NA_REAL;\n return v;\n ')\n \n \n fun <- cxxfunction(signature(), plugin=\"Rcpp\",\n body='\n Rcpp::CharacterVector v(3);\n v[0] = \"The quick brown\";\n v[1] = \"fox\";\n v[2] = R_NaString;\n return v;\n ')\n \nsrc <- '\n Rcpp::IntegerVector v =Rcpp::IntegerVector::create(7,8,9);\n std::vector<std::string> s(3);\n \n s[0] = \"x\";\n s[1] = \"y\";\n s[2] = \"z\";\n \n return Rcpp::DataFrame::create(Rcpp::Named(\"a\")=v,Rcpp::Named(\"b\")=s);\n '\n src <- '\n Function sort(x) ;\n return sort( y, Named(\"decreasing\", true));\n '\n fun <- cxxfunction(signature(x=\"function\", y=\"ANY\"), src, plugin=\"Rcpp\")\n\n ##4.5\n src <- '\n RNGScope scp;\n Rcpp::Function rt(\"rt\");\n return rt(5, 3);\n '\n fun <- cxxfunction(signature(), src, plugin=\"Rcpp\")\n set.seed(42)\nfun()\n\nf1 <- cxxfunction(signature(x=\"any\"), plugin=\"Rcpp\", body='\n RObject y(x) ;\n List res(3) ;\n res[0] = y.isS4();\n res[1] = y.hasSlot(\"z\");\n res[2] = y.slot(\"z\");\n return res;\n')\n\nf2 <- cxxfunction(signature(x=\"any\"), plugin=\"Rcpp\", body='\n S4 foo(x);\n foo.slot(\".Data\") = \"foooo\";\n return foo;\n '\n)\n\n\nsrc = '\n Rcpp::IntegerVector v =Rcpp::IntegerVector::create(7,8,9);\n std::vector<std::string> s(3);\n  \n s[0] = \"x\";\n s[1] = \"y\";\n s[2] = \"z\";\n \n return Rcpp::DataFrame::create(Rcpp::Named(\"a\")=v,Rcpp::Named(\"b\")=s);\n '\nfun <- cxxfunction(signature(vx=\"numeric\"), src, plugin=\"Rcpp\")  \nx <- seq(1.0, 3.0, by=1)\n\nsrc <- '\n Rcpp::IntegerVector vec(vx);\n Rcpp::DataFrame     DF =Rcpp::clone<Rcpp::DataFrame>(vc);\n DF[1][2] = 9;\n \n return DF ;\n'\na = data.frame(matrix(1:9,3))\n\n fun <- cxxfunction(signature(vx=\"integer\",vc=\"dataframe\"), src, plugin=\"Rcpp\")\n fun(1:10) # creates integer vector\n\nfor(i in 1:trials){\n  #病人编号,subject\n  tt = patient_chartevents[[2]][i]\n  #找到event中的位置\n  location = which(events[[1]] == tt)[1]\n  #itemid编号,和value的数值\n  zz = patient_chartevents[[3]][i]\n  zz_value = patient_chartevents[[4]][i]\n  #赋值给最终的表\n  switch(\n    zz,\n    #温度\n    \"676\"=,\"677\"=,\n    \"223762\" = ifelse(zz_value>38 && zz_value<36 , setevents(2),NA),\n    \n    #心率\n    \"3494\"=,\n    \"211\"=,\n    \"220045\"= ifelse(zz_value>90 ,setevents(3),NA),\n    \n    #呼吸频率\n    \"220210\" =,\n    \"6749\" =,\n    \"618\" =,\n    \"7884\"= ifelse(zz_value>20 ,setevents(4),NA),\n    #二氧化碳分压,毫米汞柱\n    \"4201\" =,\n    \"778\" =,\n    \"3784\" =,\"3835\"=,\"3836\"=,\n    \"227036\"=,\"220235\" = ifelse(zz_value<32,setevents(4),NA),\n    \n    #白细胞数目\n    \"227063\"=,\"227062\"=,\"220546\"=,\"226780\"=,\n    \"4200\"=, \"1542\"=, \"861\"=, \"1127\" = ifelse(zz_value>14 && zz_value<4,setevents(5),NA)\n  )\n}\n \n\n \n\n\n\n\n",
    "created" : 1475054236363.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3329104851",
    "id" : "F1DE4A50",
    "lastKnownWriteTime" : 1477277293,
    "last_content_update" : 1477277293,
    "path" : "C:/Users/Administrator/Desktop/icu project/icu_r/icu_r/sdf.R",
    "project_path" : "sdf.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}